# üì∏ –†–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –≤ –±–æ—Ç–µ

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
DeepSeek V3 (chat/reasoner) **–ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** —á–µ—Ä–µ–∑ API.

## ‚úÖ –†–µ—à–µ–Ω–∏—è

---

## 1. ü•á Google Gemini (–†–ï–ö–û–ú–ï–ù–î–£–Æ!)

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ **–ë–ï–°–ü–õ–ê–¢–ù–û** (–¥–æ 1500 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å)
- ‚úÖ –û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- ‚úÖ OCR —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É–∫—Ä–∞–∏–Ω—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –¶–µ–Ω—ã
```
FREE TIER:
- 15 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É
- 1500 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å
- 1 –º–∏–ª–ª–∏–æ–Ω —Ç–æ–∫–µ–Ω–æ–≤/–º–µ—Å—è—Ü

PAID (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ):
- gemini-1.5-flash: $0.075 / 1M —Ç–æ–∫–µ–Ω–æ–≤
- gemini-1.5-pro: $1.25 / 1M —Ç–æ–∫–µ–Ω–æ–≤
```

### –ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á
1. –ü–µ—Ä–µ–π–¥–∏: https://makersuite.google.com/app/apikey
2. –°–æ–∑–¥–∞–π API –∫–ª—é—á (–±–µ—Å–ø–ª–∞—Ç–Ω–æ!)
3. –î–æ–±–∞–≤—å –≤ `.env`:
```env
GEMINI_API_KEY=your_key_here
```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
```python
import google.generativeai as genai
from PIL import Image

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞
genai.configure(api_key=os.getenv("GEMINI_API_KEY"))
model = genai.GenerativeModel('gemini-1.5-flash')

# –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
image = Image.open('photo.jpg')
response = model.generate_content([
    "–û–ø–∏—à–∏ —á—Ç–æ –Ω–∞ —ç—Ç–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–µ –ø–æ–¥—Ä–æ–±–Ω–æ",
    image
])

print(response.text)
```

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
1. **–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
   ```
   USER: [–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ]
   BOT: –ù–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω –∑–∞–∫–∞—Ç –Ω–∞–¥ –º–æ—Ä–µ–º...
   ```

2. **OCR (—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞)**
   ```
   USER: [—Ñ–æ—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞]
   BOT: –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:
        "–î–æ–≥–æ–≤–æ—Ä ‚Ññ123..."
   ```

3. **–û—Ç–≤–µ—Ç—ã –ø–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é**
   ```
   USER: [—Ñ–æ—Ç–æ –∫–æ–¥–∞] "–ù–∞–π–¥–∏ –æ—à–∏–±–∫—É"
   BOT: –í —Å—Ç—Ä–æ–∫–µ 5 –æ–ø–µ—á–∞—Ç–∫–∞: "varible" ‚Üí "variable"
   ```

4. **–ê–Ω–∞–ª–∏–∑ –≥—Ä–∞—Ñ–∏–∫–æ–≤/–¥–∏–∞–≥—Ä–∞–º–º**
   ```
   USER: [–≥—Ä–∞—Ñ–∏–∫] "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç—Ä–µ–Ω–¥"
   BOT: –ì—Ä–∞—Ñ–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–æ—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–µ–Ω–¥...
   ```

---

## 2. ü•à OpenAI GPT-4o-mini

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –î–µ—à–µ–≤—ã–π (~$0.15 / 1M —Ç–æ–∫–µ–Ω–æ–≤)
- ‚úÖ –û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- ‚úÖ –ó–Ω–∞–∫–æ–º—ã–π API (–∫–∞–∫ —É DeepSeek)
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π

### –¶–µ–Ω—ã
```
gpt-4o-mini:
- Input: $0.15 / 1M —Ç–æ–∫–µ–Ω–æ–≤
- Output: $0.60 / 1M —Ç–æ–∫–µ–Ω–æ–≤
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ~$0.001-0.01 –∑–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É
```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
```python
from openai import OpenAI
import base64

client = OpenAI(api_key="sk-...")

# –ö–æ–¥–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
with open("image.jpg", "rb") as f:
    image_data = base64.b64encode(f.read()).decode()

response = client.chat.completions.create(
    model="gpt-4o-mini",
    messages=[{
        "role": "user",
        "content": [
            {"type": "text", "text": "–ß—Ç–æ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ?"},
            {
                "type": "image_url",
                "image_url": {
                    "url": f"data:image/jpeg;base64,{image_data}"
                }
            }
        ]
    }]
)

print(response.choices[0].message.content)
```

---

## 3. ü•â LLaVA —á–µ—Ä–µ–∑ Ollama (–ª–æ–∫–∞–ª—å–Ω–æ)

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ (–ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å)
- ‚úÖ –ù–µ—Ç –ª–∏–º–∏—Ç–æ–≤
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω

### –ú–∏–Ω—É—Å—ã
- ‚ùå –¢—Ä–µ–±—É–µ—Ç ~8GB RAM
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —á–µ–º API
- ‚ùå –ö–∞—á–µ—Å—Ç–≤–æ —Ö—É–∂–µ —á–µ–º Gemini/GPT

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
# Windows
winget install ollama

# –ò–ª–∏ —Å–∫–∞—á–∞—Ç—å: https://ollama.com/download

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å
ollama pull llava
```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
```python
import requests

def analyze_image_local(image_path, question):
    # Ollama API
    response = requests.post('http://localhost:11434/api/generate', json={
        "model": "llava",
        "prompt": question,
        "images": [open(image_path, 'rb').read()]
    })
    return response.json()['response']
```

---

## 4. üîß –î—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã

### Hugging Face Inference API
- **–¶–µ–Ω–∞:** –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π)
- **–ö–∞—á–µ—Å—Ç–≤–æ:** –°—Ä–µ–¥–Ω–µ
- **–ú–æ–¥–µ–ª–∏:** BLIP, CLIP, –∏ –¥—Ä—É–≥–∏–µ

### Claude by Anthropic
- **–¶–µ–Ω–∞:** –î–æ—Ä–æ–≥–æ ($15 / 1M —Ç–æ–∫–µ–Ω–æ–≤)
- **–ö–∞—á–µ—Å—Ç–≤–æ:** –û—Ç–ª–∏—á–Ω–æ
- **–ü–ª—é—Å:** –û—á–µ–Ω—å —É–º–Ω—ã–π

---

## üéØ –ú–æ—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è —Ç–≤–æ–µ–≥–æ –±–æ—Ç–∞

### **Google Gemini 1.5 Flash**

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
Telegram Bot
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è        ‚îÇ ‚Üí DeepSeek (–¥–µ—à–µ–≤–æ)
‚îÇ  –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è                ‚îÇ ‚Üí Gemini (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏:**
1. DeepSeek –¥–ª—è —Ç–µ–∫—Å—Ç–∞ - —Å—É–ø–µ—Ä –¥–µ—à–µ–≤–æ
2. Gemini –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π - –±–µ—Å–ø–ª–∞—Ç–Ω–æ
3. –û–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç —Ö–æ—Ä–æ—à–æ
4. –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

---

## üöÄ –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
pip install google-generativeai pillow
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á –≤ .env
```env
GEMINI_API_KEY=your_key_here
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å
```python
# services/vision_service.py

import google.generativeai as genai
from PIL import Image
import io

class VisionService:
    def __init__(self, api_key: str):
        genai.configure(api_key=api_key)
        self.model = genai.GenerativeModel('gemini-1.5-flash')
    
    async def analyze_image(self, image_bytes: bytes, question: str = None):
        """–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"""
        image = Image.open(io.BytesIO(image_bytes))
        
        prompt = question or "–û–ø–∏—à–∏ –ø–æ–¥—Ä–æ–±–Ω–æ —á—Ç–æ –Ω–∞ —ç—Ç–æ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏"
        
        response = self.model.generate_content([prompt, image])
        return response.text
```

### –®–∞–≥ 4: –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
```python
# handlers/image_handler.py

async def handle_photo(update: Update, context):
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ñ–æ—Ç–æ"""
    photo = update.message.photo[-1]  # –ë–µ—Ä–µ–º —Å–∞–º–æ–µ –±–æ–ª—å—à–æ–µ
    
    # –°–∫–∞—á–∏–≤–∞–µ–º
    file = await context.bot.get_file(photo.file_id)
    image_bytes = await file.download_as_bytearray()
    
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
    question = update.message.caption or None
    
    # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ Gemini
    await update.message.reply_text("üîç –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...")
    
    result = await vision_service.analyze_image(image_bytes, question)
    
    await update.message.reply_text(f"üì∏ **–ê–Ω–∞–ª–∏–∑:**\n\n{result}")
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Gemini | GPT-4o-mini | LLaVA |
|----------|--------|-------------|-------|
| **–¶–µ–Ω–∞** | üü¢ FREE | üü° –î–µ—à–µ–≤–æ | üü¢ FREE |
| **–ö–∞—á–µ—Å—Ç–≤–æ** | üü¢ –û—Ç–ª–∏—á–Ω–æ | üü¢ –û—Ç–ª–∏—á–Ω–æ | üü° –°—Ä–µ–¥–Ω–µ |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | üü¢ –ë—ã—Å—Ç—Ä–æ | üü¢ –ë—ã—Å—Ç—Ä–æ | üî¥ –ú–µ–¥–ª–µ–Ω–Ω–æ |
| **–õ–∏–º–∏—Ç—ã** | 1500/–¥–µ–Ω—å | –ë–µ–∑–ª–∏–º–∏—Ç | –ë–µ–∑–ª–∏–º–∏—Ç |
| **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å** | üü° –û–±–ª–∞–∫–æ | üü° –û–±–ª–∞–∫–æ | üü¢ –õ–æ–∫–∞–ª—å–Ω–æ |
| **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** | üü¢ –ü—Ä–æ—Å—Ç–∞—è | üü¢ –ü—Ä–æ—Å—Ç–∞—è | üü° –°—Ä–µ–¥–Ω–µ |

---

## ‚úÖ –í—ã–≤–æ–¥

**–î–ª—è —Ç–≤–æ–µ–≥–æ –±–æ—Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é Google Gemini:**

1. –ë–µ—Å–ø–ª–∞—Ç–Ω–æ (1500 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å = ~50 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å)
2. –û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
3. –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
4. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É–∫—Ä–∞–∏–Ω—Å–∫–æ–≥–æ

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- DeepSeek ‚Üí —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –¥–∏–∞–ª–æ–≥–∏ (–¥–µ—à–µ–≤–æ)
- Gemini ‚Üí –∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- = –ò–¥–µ–∞–ª—å–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è! üéØ

---

**–•–æ—á–µ—à—å –¥–æ–±–∞–≤–ª—é –≤ –±–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Gemini?**

–≠—Ç–æ –∑–∞–π–º–µ—Ç ~30 –º–∏–Ω—É—Ç:
1. –î–æ–±–∞–≤–ª—é `vision_service.py`
2. –ù–∞—Å—Ç—Ä–æ—é –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ç–æ
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É—é —Å –ø–∞–º—è—Ç—å—é
4. –î–æ–±–∞–≤–ª—é –∫–æ–º–∞–Ω–¥—ã `/ocr`, `/describe`

–î–∞–π –∑–Ω–∞—Ç—å! üöÄ

