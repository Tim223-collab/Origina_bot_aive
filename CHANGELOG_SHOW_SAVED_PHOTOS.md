# üì∏ –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ

## üìÖ –î–∞—Ç–∞: 29 –æ–∫—Ç—è–±—Ä—è 2025

---

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏–ª "–ø–æ–∫–∞–∂–∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ —Ñ–æ—Ç–æ", AI **–Ω–µ –º–æ–≥** –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ:
- ‚ùå AI —Ç–æ–ª—å–∫–æ **–æ–ø–∏—Å—ã–≤–∞–ª** —á—Ç–æ —Ñ–æ—Ç–æ –µ—Å—Ç—å –≤ –±–∞–∑–µ
- ‚ùå –û—Ç–ø—Ä–∞–≤–ª—è–ª–∞—Å—å **—Å—Å—ã–ª–∫–∞** –∏–ª–∏ —Ç–µ–∫—Å—Ç –≤–º–µ—Å—Ç–æ —Ñ–æ—Ç–æ
- ‚ùå –ù–µ –±—ã–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è **—Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è AI** - `show_saved_content()`:

### 1. **–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤ Function Calling**

AI —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç:
- üì∏ –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ —Ñ–æ—Ç–æ
- üîç –ò—Å–∫–∞—Ç—å —Ñ–æ—Ç–æ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é/–æ–ø–∏—Å–∞–Ω–∏—é
- üìö –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**
- "–ü–æ–∫–∞–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Ñ–æ—Ç–æ"
- "–û—Ç–ø—Ä–∞–≤—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é –∫–∞—Ä—Ç—É"
- "–î–∞–π –º–Ω–µ —Ñ–æ—Ç–æ —Å –∫–∞—Ä—Ç–æ–π"
- "–ü–æ–∫–∞–∂–∏ –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"

### 2. **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí "–ü–æ–∫–∞–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Ñ–æ—Ç–æ"
     ‚Üì
AI –≤—ã–∑—ã–≤–∞–µ—Ç ‚Üí show_saved_content()
     ‚Üì
–§—É–Ω–∫—Ü–∏—è ‚Üí SEND_CONTENT:123,456
     ‚Üì
Handler ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ
```

### 3. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏:**

1. **file_path** (–ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª) - –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
2. **file_id** (Telegram) - –º–æ–∂–µ—Ç –∏—Å—Ç–µ—á—å ‚ö†Ô∏è
3. –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ - –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚ùå

---

## üìÇ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### `services/function_tools.py`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
1. –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤ `AVAILABLE_FUNCTIONS`:
   ```python
   {
       "name": "show_saved_content",
       "description": "–ü–æ–∫–∞–∑–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ —Ñ–æ—Ç–æ/–∫–∞—Ä—Ç—É/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...",
       "parameters": {
           "query": "–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
       }
   }
   ```

2. –ú–µ—Ç–æ–¥ `_show_saved_content()`:
   - –ò—â–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ –∑–∞–ø—Ä–æ—Å—É –∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Ñ–æ—Ç–æ
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `SEND_CONTENT:{content_ids}`
   - –ú–∞–∫—Å–∏–º—É–º 5 —Ñ–æ—Ç–æ –∑–∞ —Ä–∞–∑

### `handlers/ai_handler.py`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ `SEND_CONTENT:`
- –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑ –ë–î
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ `file_path` –∏–ª–∏ `file_id`
- –ö—Ä–∞—Å–∏–≤—ã–µ –ø–æ–¥–ø–∏—Å–∏ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π

**–ö–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```python
if function_result.startswith("SEND_CONTENT:"):
    # –ü–æ–ª—É—á–∞–µ–º ID –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    content_ids = function_result.replace("SEND_CONTENT:", "").split(",")
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–∞–∂–¥–æ–µ —Ñ–æ—Ç–æ
    for content_id in content_ids:
        content = await self.db.get_content(user_id, content_id=content_id)
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ç–æ —Å –ø–æ–¥–ø–∏—Å—å—é
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AI:

1. **–ü–æ—Å–ª–µ–¥–Ω–µ–µ —Ñ–æ—Ç–æ:**
   ```
   "–ü–æ–∫–∞–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ —Ñ–æ—Ç–æ"
   "–û—Ç–ø—Ä–∞–≤—å –º–Ω–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –∫–∞—Ä—Ç—É"
   ```

2. **–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é:**
   ```
   "–î–∞–π —Ñ–æ—Ç–æ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º '–∫–∞—Ä—Ç–∞ –º–µ—Ç—Ä–æ'"
   "–ü–æ–∫–∞–∂–∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é –≤–∏–∑–∏—Ç–∫—É"
   ```

3. **–í—Å–µ —Ñ–æ—Ç–æ:**
   ```
   "–ü–æ–∫–∞–∂–∏ –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Ñ–æ—Ç–æ"
   "–î–∞–π –º–Ω–µ –º–æ–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
   ```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –ú–∞–∫—Å. —Ñ–æ—Ç–æ –∑–∞ —Ä–∞–∑ | 5 |
| –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ | `SEND_CONTENT:id1,id2,id3` |
| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | `file_path` ‚Üí `file_id` ‚Üí –æ—à–∏–±–∫–∞ |
| –ü–æ–¥–ø–∏—Å—å | –ù–∞–∑–≤–∞–Ω–∏–µ + –∫–∞—Ç–µ–≥–æ—Ä–∏—è |

### –ü—Ä–∏–º–µ—Ä –ø–æ–¥–ø–∏—Å–∏:
```
üì∏ –ö–∞—Ä—Ç–∞ –º–µ—Ç—Ä–æ –ö–∏–µ–≤–∞
üè∑ Maps
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ AI **—Ä–µ–∞–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç** —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Ñ–æ—Ç–æ  
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–ø–æ–∏—Å–∫** –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é  
‚úÖ –ö—Ä–∞—Å–∏–≤—ã–µ –ø–æ–¥–ø–∏—Å–∏ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏  
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–∏—Å—Ç—ë–∫—à–∏–µ file_id)  

---

## üí° –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
- üìÑ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–Ω–µ —Ç–æ–ª—å–∫–æ —Ñ–æ—Ç–æ)
- üîó –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
- üìù –ü–æ–∫–∞–∑ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞/–∫–æ–¥–∞
- üè∑ –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º ("–ø–æ–∫–∞–∂–∏ –≤—Å–µ –∫–∞—Ä—Ç—ã")

