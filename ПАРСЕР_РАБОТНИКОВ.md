# ๐ท๏ธ ะะฐััะตั ะพััะตัะพะฒ ัะฐะฑะพัะฝะธะบะพะฒ

## ๐ ะะฟะธัะฐะฝะธะต

ะะพะปะฝะฐั ะธะฝัะตะณัะฐัะธั ะฟะฐััะธะฝะณะฐ ะฒะตะฑ-ะฟะฐะฝะตะปะธ ั ะพััะตัะฐะผะธ ัะฐะฑะพัะฝะธะบะพะฒ (http://91.228.153.202:8000) ะฒ Telegram ะฑะพัะฐ AIVE.

**ะะพะทะผะพะถะฝะพััะธ:**
- ๐ ะะฒัะพะผะฐัะธัะตัะบะฐั ะฐะฒัะพัะธะทะฐัะธั ะฝะฐ ัะฐะนัะต
- ๐ ะะฐััะธะฝะณ ัะฐะฑะปะธัั ั ะพััะตัะฐะผะธ ัะฐะฑะพัะฝะธะบะพะฒ
- ๐จ ะะฑะฝะฐััะถะตะฝะธะต ัะบะฐะผะฐ (ะบัะฐัะฝัะน ะบัะตััะธะบ, ะถะตะปัะพะต ะฟัะตะดัะฟัะตะถะดะตะฝะธะต)
- ๐ธ ะะฒัะพะผะฐัะธัะตัะบะธะต ัะบัะธะฝัะพัั ะดะตัะฐะปะตะน ัะบะฐะผะฐ
- ๐ฏ ะคะธะปัััะฐัะธั ะฟะพ ะบะพะผะฐะฝะดะต (Good Bunny / Velvet)
- ๐ ะคะธะปัััะฐัะธั ะฟะพ ะดะฐัะต
- ๐ค ะะฝัะตะณัะฐัะธั ั AIVE ะดะปั ะณะตะฝะตัะฐัะธะธ ะพััะตัะพะฒ

---

## ๐ ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### 1๏ธโฃ **ะัะพััะพะน ะทะฐะฟัะพั ะฟัะพะฒะตัะบะธ**

ะัะพััะพ ะฟะธัะธ AIVE:

```
ัะดะตะปะฐะน ะฟัะพะฒะตัะบั ะฟะพ ัะฐะฑะพัะฝะธะบะฐะผ
```

```
ะฟัะพะฒะตัั ะพััะตัั ะทะฐ ัะตะณะพะดะฝั
```

```
ะฟะพะบะฐะถะธ ััะฐัะธััะธะบั ะฟะพ Good Bunny
```

**AIVE ะฐะฒัะพะผะฐัะธัะตัะบะธ:**
- ะะฐะนะดะตั ะฝะฐ ัะฐะนั
- ะกะฟะฐััะธั ะดะฐะฝะฝัะต
- ะัะพะฒะตัะธั ะฝะฐ ัะบะฐะผ
- ะกัะพัะผะธััะตั ะบัะฐัะธะฒัะน ะพััะตั

---

### 2๏ธโฃ **ะัะพะฒะตัะบะฐ ะบะพะฝะบัะตัะฝะพะณะพ ัะฐะฑะพัะฝะธะบะฐ**

```
ััะพ ัะพ ัะบะฐะผะพะผ ั ะะปะตะบัะตั?
```

```
ะฟะพะบะฐะถะธ ะพััะตั ะฟะพ ะะฒะฐะฝั
```

```
ะฟัะพะฒะตัั ัะฐะฑะพัะฝะธะบะฐ ะะฐัะธั
```

**AIVE:**
- ะะฐะนะดะตั ัะฐะฑะพัะฝะธะบะฐ ะฒ ะพััะตัะฐั
- ะัะปะธ ะตััั ัะบะฐะผ โ ะพัะบัะพะตั ะผะพะดะฐะปัะฝะพะต ะพะบะฝะพ
- ะกะพะทะดะฐัั ัะบัะธะฝัะพั
- ะัะฟัะฐะฒะธั ะดะตัะฐะปะธ

---

### 3๏ธโฃ **ะคะธะปัััะฐัะธั ะฟะพ ะดะฐัะต**

```
ะฟัะพะฒะตัั ัะฐะฑะพัะฝะธะบะพะฒ ะทะฐ ะฒัะตัะฐ
```

```
ะฟะพะบะฐะถะธ ะพััะตัั ะทะฐ 2025-10-27
```

---

## ๐ ะงัะพ ะฟะฐััะธััั

ะะปั ะบะฐะถะดะพะณะพ ัะฐะฑะพัะฝะธะบะฐ:

```
โ ะะผั ัะฐะฑะพัะฝะธะบะฐ
โ Username (@nickname)
โ ะะพะผะฐะฝะดะฐ (Good Bunny / Velvet)
โ ID ะพััะตัะฐ
โ SFS (ะพะฑัะตะต ะบะพะปะธัะตััะฒะพ)
โ Only Now (SFS - SCH)
โ SCH (ั ัะฐัะฟะธัะฐะฝะธะตะผ)
โ ะัะพะฒะตัะบะฐ ะฝะฐ ัะบะฐะผ:
   ๐จ ะัะฐัะฝัะน ะบัะตััะธะบ = ะกะะะ ะะะะะะฃะะะ
   โ๏ธ ะะตะปััะน ะทะฝะฐะบ = ะะะะะะะะขะะะฌะะะฏ ะะะขะะะะะกะขะฌ
   โ ะะตะปะตะฝะฐั ะณะฐะปะพัะบะฐ = ะงะะกะขะซะ ะะขะงะะข
```

---

## ๐ฏ ะัะธะผะตั ะพััะตัะฐ ะพั AIVE

```
๐ **ะััะตั ะฟะพ ะบะพะผะฐะฝะดะต Good Bunny** ะทะฐ 2025-10-28

๐ฅ ะะฐะฑะพัะฝะธะบะพะฒ: 15
๐ SFS: 2450
โฑ๏ธ Only Now: 1850
โ SCH: 600

๐จ **ะกะะะ ะะะะะะฃะะะ**: 2 ัะฐะฑะพัะฝะธะบ(ะพะฒ)

โ๏ธ **ะะฐะฑะพัะฝะธะบะธ ัะพ ัะบะฐะผะพะผ:**
๐จ Alexey (@alexey_work) (SFS: 150, SCH: 50)
โ๏ธ Maria (@maria_assist) (SFS: 100, SCH: 30)
```

---

## ๐ง ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะััะธัะตะบัััะฐ

```
services/work_parser_service.py
โโโ WorkParserService - ะพัะฝะพะฒะฝะพะน ะบะปะฐัั ะฟะฐััะตัะฐ
โ   โโโ _init_browser() - ะทะฐะฟััะบ Playwright (headless Chrome)
โ   โโโ _login() - ะฐะฒัะพัะธะทะฐัะธั ะฝะฐ ัะฐะนัะต
โ   โโโ parse_reports() - ะฟะฐััะธะฝะณ ัะฐะฑะปะธัั ะพััะตัะพะฒ
โ   โโโ _parse_worker_row() - ะฟะฐััะธะฝะณ ัััะพะบะธ ัะฐะฑะพัะฝะธะบะฐ
โ   โโโ _parse_scam_details() - ะฟะฐััะธะฝะณ ะผะพะดะฐะปัะฝะพะณะพ ะพะบะฝะฐ ัะบะฐะผะฐ
โ   โโโ get_worker_scam_screenshots() - ะฟะพะปััะตะฝะธะต ัะบัะธะฝัะพัะพะฒ
```

### CSS ะกะตะปะตะบัะพัั

```python
SELECTORS = {
    # ะะฒัะพัะธะทะฐัะธั
    "login_username": "input[name='username']",
    "login_password": "input[name='password']",
    "login_submit": "button[type='submit']",
    
    # ะขะฐะฑะปะธัะฐ
    "table_rows": "tbody tr",
    "worker_name": "td:nth-child(1) strong",
    "scam_icon_red": "td:nth-child(4) i.bi-x-circle-fill.text-danger",
    "sfs_badge": "td:nth-child(5) .badge",
    
    # ะ ั.ะด...
}
```

### Playwright - Headless ัะตะถะธะผ

```python
browser = await playwright.chromium.launch(
    headless=True,  # ะะตะท GUI
    args=[
        '--no-sandbox',  # ะะปั Linux ัะตัะฒะตัะพะฒ
        '--disable-setuid-sandbox',
        '--disable-dev-shm-usage',
        '--disable-gpu'
    ]
)
```

---

## ๐ ะะฐัััะพะนะบะฐ

### 1. ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (`.env`)

```env
# ะะฐะฑะพัะธะน ัะฐะนั
WORK_SITE_URL=http://91.228.153.202:8000
WORK_SITE_USERNAME=Timofey
WORK_SITE_PASSWORD=admin123
```

### 2. ะฃััะฐะฝะพะฒะบะฐ Playwright

```bash
# ะฃััะฐะฝะพะฒะบะฐ ะฑะธะฑะปะธะพัะตะบะธ
pip install playwright

# ะฃััะฐะฝะพะฒะบะฐ ะฑัะฐัะทะตัะพะฒ
playwright install chromium
```

**ะะปั Linux ัะตัะฒะตัะฐ:**

```bash
# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน ะดะปั headless Chrome
sudo apt-get update
sudo apt-get install -y \
    libnss3 \
    libatk1.0-0 \
    libatk-bridge2.0-0 \
    libcups2 \
    libdrm2 \
    libxkbcommon0 \
    libxcomposite1 \
    libxdamage1 \
    libxrandr2 \
    libgbm1 \
    libasound2
```

---

## ๐ค ะะฝัะตะณัะฐัะธั ั AIVE

### Function Calling

AIVE ะธัะฟะพะปัะทัะตั 2 ััะฝะบัะธะธ:

#### 1. `get_work_stats` - ะพะฑัะฐั ััะฐัะธััะธะบะฐ

```json
{
  "name": "get_work_stats",
  "description": "ะะพะปััะธัั ััะฐัะธััะธะบั ัะฐะฑะพัั ั ัะฐะนัะฐ",
  "parameters": {
    "date": "YYYY-MM-DD (ะพะฟัะธะพะฝะฐะปัะฝะพ)",
    "team": "Good Bunny | Velvet | all"
  }
}
```

#### 2. `check_worker_scam` - ะฟัะพะฒะตัะบะฐ ัะฐะฑะพัะฝะธะบะฐ

```json
{
  "name": "check_worker_scam",
  "description": "ะัะพะฒะตัะธัั ัะบะฐะผ ั ะบะพะฝะบัะตัะฝะพะณะพ ัะฐะฑะพัะฝะธะบะฐ",
  "parameters": {
    "worker_name": "ะะผั ัะฐะฑะพัะฝะธะบะฐ",
    "date": "YYYY-MM-DD (ะพะฟัะธะพะฝะฐะปัะฝะพ)",
    "team": "Good Bunny | Velvet | all"
  }
}
```

---

## ๐ธ ะกะบัะธะฝัะพัั

ะัะต ัะบัะธะฝัะพัั ัะพััะฐะฝััััั ะฒ:

```
data/screenshots/
โโโ scam_15516_Alexey_20251028_143022.png
โโโ scam_15517_Maria_20251028_143045.png
โโโ ...
```

---

## โก ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

- **ะะฐะฟััะบ ะฑัะฐัะทะตัะฐ**: ~2-3 ัะตะบัะฝะดั
- **ะะฒัะพัะธะทะฐัะธั**: ~1-2 ัะตะบัะฝะดั
- **ะะฐััะธะฝะณ 10 ัะฐะฑะพัะฝะธะบะพะฒ**: ~5-7 ัะตะบัะฝะด
- **ะะฐััะธะฝะณ 50 ัะฐะฑะพัะฝะธะบะพะฒ**: ~15-20 ัะตะบัะฝะด
- **ะกะบัะธะฝัะพั ะผะพะดะฐะปัะฝะพะณะพ ะพะบะฝะฐ**: ~0.5 ัะตะบัะฝะดั

**ะัะพะณะพ ะดะปั 15 ัะฐะฑะพัะฝะธะบะพะฒ**: ~10-12 ัะตะบัะฝะด โก

---

## ๐ ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ

```python
# ะัะต ะพัะธะฑะบะธ ะปะพะณะธัััััั ะธ ะฒะพะทะฒัะฐัะฐัััั ะฟะพะปัะทะพะฒะฐัะตะปั
{
  "success": False,
  "error": "ะะฟะธัะฐะฝะธะต ะพัะธะฑะบะธ"
}
```

**ะขะธะฟะธัะฝัะต ะพัะธะฑะบะธ:**
- โ ะัะธะฑะบะฐ ะฐะฒัะพัะธะทะฐัะธะธ (ะฝะตะฒะตัะฝัะน ะปะพะณะธะฝ/ะฟะฐัะพะปั)
- โ ะขะฐะนะผะฐัั ะทะฐะณััะทะบะธ ัะฐะฑะปะธัั (ะฝะตั ะธะฝัะตัะฝะตัะฐ)
- โ ะัััะฐั ัะฐะฑะปะธัะฐ (ะฝะตั ะพััะตัะพะฒ ะทะฐ ะดะฐัั)
- โ ะะฐะฑะพัะฝะธะบ ะฝะต ะฝะฐะนะดะตะฝ

---

## ๐ Workflow

```mermaid
graph TD
    A[ะะพะปัะทะพะฒะฐัะตะปั: ะฟัะพะฒะตัั ัะฐะฑะพัะฝะธะบะพะฒ] --> B[AIVE ะฐะฝะฐะปะธะทะธััะตั ะทะฐะฟัะพั]
    B --> C[Function Calling: get_work_stats]
    C --> D[WorkParserService.parse_reports]
    D --> E[Playwright: ะทะฐะฟััะบ ะฑัะฐัะทะตัะฐ]
    E --> F[ะะฒัะพัะธะทะฐัะธั ะฝะฐ ัะฐะนัะต]
    F --> G[ะะตัะตัะพะด ะฒ ะัะพะฒะตัะบะฐ ะพัะพะฑะพ]
    G --> H[ะฃััะฐะฝะพะฒะบะฐ ัะธะปัััะพะฒ]
    H --> I[ะะฐััะธะฝะณ ัะฐะฑะปะธัั]
    I --> J{ะััั ัะบะฐะผ?}
    J -->|ะะฐ| K[ะะปะธะบ ะฝะฐ ะบัะตััะธะบ]
    K --> L[ะะฐััะธะฝะณ ะผะพะดะฐะปัะฝะพะณะพ ะพะบะฝะฐ]
    L --> M[ะกะพะทะดะฐะฝะธะต ัะบัะธะฝัะพัะฐ]
    M --> N[ะะพะทะฒัะฐั ะดะฐะฝะฝัั]
    J -->|ะะตั| N
    N --> O[AIVE ะณะตะฝะตัะธััะตั ะพััะตั]
    O --> P[ะัะฟัะฐะฒะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปั]
```

---

## ๐ ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ

### ะะปั AIVE

```
โ ัะดะตะปะฐะน ะฟัะพะฒะตัะบั ัะฐะฑะพัะฝะธะบะพะฒ
โ ะฟัะพะฒะตัั ะพััะตัั ะทะฐ ัะตะณะพะดะฝั
โ ะฟะพะบะฐะถะธ ััะฐัะธััะธะบั Good Bunny
โ ะตััั ะปะธ ัะบะฐะผ ั ะบะพะณะพ-ัะพ?
โ ััะพ ัะพ ัะบะฐะผะพะผ ั ะะปะตะบัะตั
โ ะฟัะพะฒะตัั ัะฐะฑะพัะฝะธะบะฐ ะะฐัะธั
โ ะพััะตัั ะทะฐ ะฒัะตัะฐ
โ ััะฐัะธััะธะบะฐ ะฟะพ ะบะพะผะฐะฝะดะต Velvet
```

### ะััะผัะต ะบะพะผะฐะฝะดั (ะพะฟัะธะพะฝะฐะปัะฝะพ)

```
/work_stats
/work_stats Good Bunny
/check_worker Alexey
```

---

## ๐จ ะะฐััะพะผะธะทะฐัะธั

### ะะทะผะตะฝะธัั ัะธะปัััั ะฟะพ ัะผะพะปัะฐะฝะธั

```python
# services/work_parser_service.py

async def parse_reports(
    self,
    team: str = "Good Bunny",  # โ ะะทะผะตะฝะธ ะทะดะตัั
    report_date: Optional[str] = None
):
```

### ะะทะผะตะฝะธัั ัะพัะผะฐั ะพััะตัะฐ

```python
# services/function_tools.py

async def _get_work_stats(self, user_id: int, args: Dict) -> str:
    # โ ะะทะผะตะฝะธ ัะพัะผะฐั ะทะดะตัั
    result = f"๐ **ะััะตั...**"
```

---

## ๐ ะะฐะทะฒะตัััะฒะฐะฝะธะต ะฝะฐ Linux ัะตัะฒะตัะต

### 1. ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน

```bash
# ะะฑะฝะพะฒะปะตะฝะธะต ัะธััะตะผั
sudo apt update && sudo apt upgrade -y

# Python ะธ pip
sudo apt install python3 python3-pip -y

# Playwright ะทะฐะฒะธัะธะผะพััะธ
sudo apt-get install -y \
    libnss3 libatk1.0-0 libatk-bridge2.0-0 \
    libcups2 libdrm2 libxkbcommon0 \
    libxcomposite1 libxdamage1 libxrandr2 \
    libgbm1 libasound2
```

### 2. ะฃััะฐะฝะพะฒะบะฐ Playwright

```bash
pip install playwright
playwright install chromium
```

### 3. ะะฐัััะพะนะบะฐ .env

```bash
nano .env
# ะะพะฑะฐะฒั ะฟะตัะตะผะตะฝะฝัะต WORK_SITE_*
```

### 4. ะะฐะฟััะบ ะฑะพัะฐ

```bash
python main.py
```

---

## ๐ ะกะฒัะทะฐะฝะฝัะต ัะฐะนะปั

- `services/work_parser_service.py` - ะพัะฝะพะฒะฝะพะน ะฟะฐััะตั
- `services/function_tools.py` - ััะฝะบัะธะธ ะดะปั AIVE
- `main.py` - ะธะฝะธัะธะฐะปะธะทะฐัะธั ะฟะฐััะตัะฐ
- `config.py` - ะบะพะฝัะธะณััะฐัะธั (URL, ะปะพะณะธะฝ, ะฟะฐัะพะปั)

---

## โ ะงัะพ ัะตะฐะปะธะทะพะฒะฐะฝะพ

- โ Playwright ะฟะฐััะตั (headless Chrome)
- โ ะะฒัะพัะธะทะฐัะธั ะฝะฐ ัะฐะนัะต
- โ ะะฐััะธะฝะณ ัะฐะฑะปะธัั ัะฐะฑะพัะฝะธะบะพะฒ
- โ ะะฑะฝะฐััะถะตะฝะธะต ัะบะฐะผะฐ (ะบัะฐัะฝัะน/ะถะตะปััะน/ะทะตะปะตะฝัะน)
- โ ะะฐััะธะฝะณ ะผะพะดะฐะปัะฝะพะณะพ ะพะบะฝะฐ ั ะดะตัะฐะปัะผะธ
- โ ะกะบัะธะฝัะพัั
- โ ะคะธะปัััะฐัะธั ะฟะพ ะบะพะผะฐะฝะดะต
- โ ะคะธะปัััะฐัะธั ะฟะพ ะดะฐัะต
- โ ะะฝัะตะณัะฐัะธั ั AIVE (Function Calling)
- โ ะัะพะฒะตัะบะฐ ะบะพะฝะบัะตัะฝะพะณะพ ัะฐะฑะพัะฝะธะบะฐ
- โ ะะตะฝะตัะฐัะธั ะพััะตัะพะฒ
- โ ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ
- โ ะะพะณะธัะพะฒะฐะฝะธะต

---

## ๐ฎ ะะพะทะผะพะถะฝัะต ัะปัััะตะฝะธั

1. **ะััะธัะพะฒะฐะฝะธะต ะพััะตัะพะฒ** (ััะพะฑั ะฝะต ะฟะฐััะธัั ะบะฐะถะดัะน ัะฐะท)
2. **ะฃะฒะตะดะพะผะปะตะฝะธั ะพ ะฝะพะฒะพะผ ัะบะฐะผะต** (ะฟัะพะฐะบัะธะฒะฝะพ)
3. **ะกัะฐัะธััะธะบะฐ ะฟะพ ัะฐะฑะพัะฝะธะบะฐะผ ะทะฐ ะฟะตัะธะพะด**
4. **ะญะบัะฟะพัั ะพััะตัะพะฒ ะฒ Excel**
5. **ะัะฐัะธะบะธ ะธ ะฒะธะทัะฐะปะธะทะฐัะธั**

---

## ๐ก ะกะพะฒะตัั

1. **ะะฐ Linux ัะตัะฒะตัะต** - ะธัะฟะพะปัะทัะน `systemd` ะดะปั ะฐะฒัะพะทะฐะฟััะบะฐ ะฑะพัะฐ
2. **ะัะพะฒะตััะน ะปะพะณะธ** - ะฒัะต ะดะตะนััะฒะธั ะฟะฐััะตัะฐ ะปะพะณะธัััััั
3. **ะกะบัะธะฝัะพัั** - ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพััะฐะฝััััั ะฒ `data/screenshots/`
4. **Headless ัะตะถะธะผ** - ะฑัะฐัะทะตั ัะฐะฑะพัะฐะตั ะฑะตะท GUI (ะฑััััะพ ะธ ะปะตะณะบะพ)

---

## ๐ ะะพัะพะฒะพ!

ะขะตะฟะตัั AIVE ะผะพะถะตั:
- ๐ ะะฐััะธัั ะพััะตัั ัะฐะฑะพัะฝะธะบะพะฒ
- ๐จ ะะฑะฝะฐััะถะธะฒะฐัั ัะบะฐะผ
- ๐ธ ะะตะปะฐัั ัะบัะธะฝัะพัั
- ๐ ะะตะฝะตัะธัะพะฒะฐัั ะบัะฐัะธะฒัะต ะพััะตัั
- ๐ฌ ะัะฒะตัะฐัั ะฝะฐ ะตััะตััะฒะตะฝะฝะพะผ ัะทัะบะต

**ะัะพััะพ ะฝะฐะฟะธัะธ:**
> "ะะนะฒะธ, ัะดะตะปะฐะน ะฟัะพะฒะตัะบั ะฟะพ ัะฐะฑะพัะฝะธะบะฐะผ" ๐

