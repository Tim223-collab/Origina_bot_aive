# üñºÔ∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üìÖ –î–∞—Ç–∞: 29 –æ–∫—Ç—è–±—Ä—è 2025

---

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ñ–æ—Ç–æ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Ç–æ–ª—å–∫–æ `file_id` –æ—Ç Telegram, –∫–æ—Ç–æ—Ä—ã–π:
- **–ò—Å—Ç–µ–∫–∞–µ—Ç** —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è
- **–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω** –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö
- –ü—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–µ **"Content not viewable in your region"** –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ —Ñ–æ—Ç–æ

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è **—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ –¥–∏—Å–∫** –≤ –ø–∞–ø–∫–µ `data/images/`:

### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤**
   - –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ç–æ –æ–Ω–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `data/images/`
   - –ò–º—è —Ñ–∞–π–ª–∞: `{user_id}_{timestamp}.jpg`
   - –í –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ `file_id`, —Ç–∞–∫ –∏ `file_path`

### 2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ**
   ```
   1. file_path (–ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª) - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #1
   2. file_id (Telegram) - fallback
   3. –û–ø–∏—Å–∞–Ω–∏–µ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º - –µ—Å–ª–∏ –æ–±–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
   ```

### 3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - –ï—Å–ª–∏ `file_id` –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª
   - –ü–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–æ

---

## üìÇ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### `main.py`
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `time` –∏ `Path`
- –í `_handle_photo_router()`: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ç–æ –Ω–∞ –¥–∏—Å–∫ –ø–µ—Ä–µ–¥ –∞–≤—Ç–æ–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º

### `handlers/content_handler.py`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–∞–ø–∫–∞ `self.images_dir = config.DATA_DIR / "images"`
- –í `handle_image_for_library()`: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∏—Å–∫
- –í `_send_content_item()`: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç `file_path` > `file_id`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ç–æ

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ –§–æ—Ç–æ **–Ω–µ –ø—Ä–æ–ø–∞–¥–∞—é—Ç** —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º  
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç **–≤ –ª—é–±–æ–º —Ä–µ–≥–∏–æ–Ω–µ**  
‚úÖ **Fallback** –Ω–∞ file_id –¥–ª—è —Å—Ç–∞—Ä—ã—Ö —Ñ–æ—Ç–æ  
‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö  

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

1. –û—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ –±–æ—Ç—É
2. –°–æ—Ö—Ä–∞–Ω–∏ –µ–≥–æ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É
3. –ü–æ–ø—Ä–æ—Å–∏ –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ —Ñ–æ—Ç–æ
4. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ñ–æ—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
5. –ü—Ä–æ–≤–µ—Ä—å –ø–∞–ø–∫—É `data/images/` - —Ç–∞–º –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

---

## üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞

–ü—Ä–∏–º–µ—Ä–Ω—ã–π —Ä–∞–∑–º–µ—Ä:
- **1 —Ñ–æ—Ç–æ** ‚âà 100-500 KB
- **100 —Ñ–æ—Ç–æ** ‚âà 10-50 MB
- **1000 —Ñ–æ—Ç–æ** ‚âà 100-500 MB

üí° **–°–æ–≤–µ—Ç:** –ù–∞—Å—Ç—Ä–æ–π —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤ –∏ –æ—á–∏—Å—Ç–∫—É —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤ –µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—à—å —Ö—Ä–∞–Ω–∏—Ç—å –º–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

